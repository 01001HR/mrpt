//------------------------------------------------------------
// Config file for the "ICP-SLAM" application
//
//              ~ The MRPT Library ~
//          Jose Luis Blanco Claraco (C) 2005-2008
//------------------------------------------------------------



//=======================================================
// Section: [ICP]
//  Parameters of ICP inside the ICP-based SLAM class
//=======================================================
[ICP]
// The maximum number of iterations to execute if convergence is not achieved before
maxIterations=60 
// Initial maximum distance for matching a pair of points
thresholdDist=0.05
// An angular factor (in degrees) to increase the matching distance for distant points.
thresholdAng_DEG=1
// After convergence, the thresholds are multiplied by this constant and ICP keep running (provides finer matching)
ALFA=0.50 
// This is the smallest the distance threshold can become after stopping ICP and accepting the result.
smallestThresholdDist=0.03
// 1: Use the closest points only, 0: Use all the correspondences within the threshold (more robust sometimes, but slower)
onlyClosestCorrespondences=1

// 0: icpClassic
// 1: icpLevenbergMarquardt
// 2: icpIKF
ICP_algorithm = 0


//=======================================================
// Section: [MappingApplication]
// Use: Here comes global parameters for the app.
//=======================================================
[MappingApplication]
// The source file (RAW-LOG) with action/observation pairs
// rawlog_file=D:\MAPIR\PCB-designs\eNoses\DATASET\Experiment Corridor 2D\dataset_patrolbot_2010_05_14_test1_fan_04ms.rawlog

rawlog_file=D:\My Things\ARTICULOS y PAPERS\Articulo - Modelado MOS\Experiment Corridor\Datasets\dataset_patrolbot_2010_05_14_PASILLO_2_04ms.rawlog
rawlog_offset=0

// The directory where the log files will be saved (left in blank if no log is required)
logOutput_dir=LOG_ICP-SLAM
LOG_FREQUENCY=50			// The frequency of log files generation:
SAVE_3D_SCENE=1
SAVE_POSE_LOG=0
CAMERA_3DSCENE_FOLLOWS_ROBOT=1
SHOW_PROGRESS_3D_REAL_TIME=1

SHOW_PROGRESS_3D_REAL_TIME_DELAY_MS=5

insertionLinDistance=0.5	// The distance threshold for inserting observations in the map (meters)
insertionAngDistance=40	// The distance threshold for inserting observations in the map (degrees)

matchAgainstTheGrid = false

alwaysInsertByClass = CObservationGasSensors

// ====================================================
//
//            MULTIMETRIC MAP CONFIGURATION
//
// ====================================================
// Creation of maps:
occupancyGrid_count=0
gasGrid_count=1		;number of gridmaps to generate
landmarksMap_count=0
beaconMap_count=0
pointsMap_count=1

// Selection of map for likelihood: (fuseAll=-1,occGrid=0, points=1,landmarks=2,gasGrid=3)
likelihoodMapSelection=-1


// ====================================================
//   MULTIMETRIC MAP: PointsMap #00
// ====================================================
// Creation Options for PointsMap 00:
[MappingApplication_pointsMap_00_insertOpts]
minDistBetweenLaserPoints=0.01
fuseWithExisting=0
isPlanarMap=1


// ====================================================
//   MULTIMETRIC MAP: GasMap #00
// ====================================================
// Creation Options for CGasConcentrationGridMap2D 00:
[MappingApplication_gasGrid_00_creationOpts]
mapType=0   ; 0: mrAchin, 1: mrKalman  2:mrKalmanAproximate   - See CGasConcentrationGridMap2D::CGasConcentrationGridMap2D
min_x=-2
max_x=4
min_y=-2
max_y=2
resolution=0.05  //m longitud del lado de celda (must be small for mapType=0)

// Insertion Options for CGasConcentrationGridMap2D 00:
[MappingApplication_gasGrid_00_insertOpts]
sigma=0.1   		// The sigma of the "Parzen"-kernel Gaussian. 
cutoffRadius=0.30 	// The cutoff radius for updating cells. 
R_min=0 			// Limits for normalization of sensor readings. 
R_max=2

KF_covSigma=0.05 //0.45		// [KF model] The "sigma" for the initial covariance value between cells (in meters). 
KF_initialCellStd=1.0 	// [KF model] The initial standard deviation of each cell's concentration (will be stored both at each cell's structure and in the covariance matrix as variances in the diagonal) (in normalized concentration units). 
KF_observationModelNoise=0.30 	// [KF model] The sensor model noise (in normalized concentration units). 
KF_defaultCellMeanValue=0.1 	
KF_W_size=10


KF_sensorType			= 9760	//Sensor type to generate the map  0=mean of all sensors ; 0x6810, 0x2120, etc (9760 = 0x2620, 9728 = 0x2600)
tauR 					= 1.94	// Value for 0x2600 and 0x2620
tauD 					= 11.4	//Not used (remove if necessary)

winNoise_size 			= 30    //[useMOSmodel] size for windows noise filtering
decimate_value			= 6		//[useMOSmodel] decimation value after noise filtering

// [0.2732 0.2966 0.3363 0.4832],[9 9 11.4 12.4]  0x2600
// [0.5540 0.683 0.963 1.71],[6.7 6.7 8.7 13]  0x2620
// [0.5 0.983 1.263 2.01],[6 6.03 7.6 13]

tauD_concentration 		= [0.5 0.983 1.263 2.01]
tauD_value				= [5.8 5.8 7.6 13]
memory_speed			= [0.022 0.072 0.146 0.21]
memory_delay			= [4 12 20 24]
enose_id				= 0		//[useMOSmodel] id of the enose used to generate this map (must be < gasGrid_count)
save_maplog				= 1		//[useMOSmodel] Boolean value to save the gas map as a log file (./log_MOSmodel_MAP_'sensorType'.txt)
useMOSmodel				= 1		//Use MOS model previous mapType implementation